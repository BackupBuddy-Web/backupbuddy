<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BackupBuddy - Your Digital Vault</title>
    <link rel="stylesheet" href="app.css">
    <!-- Add/Edit Contact Modal -->
<div id="contact-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="contact-modal-title">Add Trusted Contact</h2>
            <button id="close-contact-modal" class="close-btn">&times;</button>
        </div>
        <form id="contact-form">
            <div class="form-group">
                <label>Full Name *</label>
                <input type="text" id="contact-name" placeholder="e.g., Sarah Johnson" required>
            </div>
            
            <div class="form-group">
                <label>Email Address *</label>
                <input type="email" id="contact-email" placeholder="e.g., sarah@email.com" required>
            </div>

           <div class="form-group">
    <label>Relationship</label>
    <select id="contact-relationship">
        <option value="Husband">Husband</option>
        <option value="Wife">Wife</option>
        <option value="Son">Son</option>
        <option value="Daughter">Daughter</option>
        <option value="Father">Father</option>
        <option value="Mother">Mother</option>
        <option value="Brother">Brother</option>
        <option value="Sister">Sister</option>
        <option value="Friend">Friend</option>
        <option value="Lawyer">Lawyer</option>
        <option value="Partner">Partner</option>
        <option value="Other">Other</option>
    </select>
</div>

            <div class="modal-actions">
                <button type="button" id="cancel-contact" class="btn-secondary">Cancel</button>
                <button type="submit" class="btn-primary">Save Contact</button>
            </div>
        </form>
    </div>
</div>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Auth Container (Login/Signup) -->
    <div id="auth-container" class="auth-container">
        <div class="auth-box">
            <div class="logo">BackupBuddy</div>
            <h2 id="auth-title">Welcome Back</h2>
            
            <!-- Auth Form -->
            <form id="auth-form" class="auth-form">
                <input type="email" id="email" placeholder="Email" required>
                <input type="password" id="password" placeholder="Password" required>
                <button type="submit" class="btn-primary" id="auth-submit">Sign In</button>
            </form>
            
            <p class="auth-toggle">
                <span id="toggle-text">Don't have an account?</span>
                <a href="#" id="toggle-mode">Sign up</a>
            </p>
            
            <div id="auth-error" class="error-message"></div>
        </div>
    </div>

    <!-- App Container (Dashboard) -->
    <div id="app-container" class="app-container" style="display: none;">
        <!-- Header -->
        <header class="app-header">
            <div class="logo">BackupBuddy</div>
            <div class="header-actions">
                <span id="user-email" class="user-email"></span>
                <button id="logout-btn" class="btn-secondary">Log Out</button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="app-main">
            <!-- Sidebar -->
            <aside class="sidebar">
                <nav class="nav-menu">
                    <a href="#" class="nav-item active" data-view="vault">
                        <span>üîê</span> My Vault
                    </a>
                    <a href="#" class="nav-item" data-view="contacts">
                        <span>üë•</span> Trusted Contacts
                    </a>
                    <a href="#" class="nav-item" data-view="checkin">
                        <span>‚úÖ</span> Check-Ins
                    </a>
                    <a href="#" class="nav-item" data-view="settings">
                        <span>‚öôÔ∏è</span> Settings
                    </a>
                </nav>
            </aside>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Vault View -->
                <div id="vault-view" class="view active">
                    <div class="view-header">
                        <h1>My Vault</h1>
                        <button id="add-entry-btn" class="btn-primary">+ Add Entry</button>
                    </div>

                    <div id="entries-list" class="entries-list">
                        <!-- Vault entries will load here -->
                    </div>

                    <div id="empty-state" class="empty-state">
                        <div class="empty-icon">üîê</div>
                        <h3>Your vault is empty</h3>
                        <p>Add your first entry to get started protecting your digital life.</p>
                        <button id="add-first-entry" class="btn-primary">Add Your First Entry</button>
                    </div>
                </div>

        <!-- Contacts View -->
<div id="contacts-view" class="view">
    <div class="view-header">
        <h1>Trusted Contacts</h1>
        <button id="add-contact-btn" class="btn-primary">+ Add Contact</button>
    </div>

    <div id="contacts-list" class="contacts-list">
        <!-- Contacts will load here -->
    </div>

    <div id="contacts-empty-state" class="empty-state">
        <div class="empty-icon">üë•</div>
        <h3>No trusted contacts yet</h3>
        <p>Add people who should have emergency access to your vault.</p>
        <button id="add-first-contact" class="btn-primary">Add Your First Contact</button>
    </div>
    
    <div class="plan-limit-notice" style="margin-top: 2rem; padding: 1rem; background: #eff6ff; border-radius: 8px; border-left: 4px solid #1e40af;">
        <p style="color: #1e40af; margin: 0;">
            <strong>Free plan:</strong> 1 trusted contact ‚Ä¢ 
            <strong>Premium:</strong> 3 trusted contacts
        </p>
    </div>
</div>
<!-- Check-in View -->
<div id="checkin-view" class="view">
    <div class="view-header">
        <h1>Check-Ins</h1>
    </div>
    <!-- Settings View -->
<div id="settings-view" class="view">
    <div class="view-header">
        <h1>Settings</h1>
    </div>
    <div style="max-width: 800px;">
        <div class="settings-card">
            <h2 class="settings-card-title">üë§ Account Information</h2>
            <div class="settings-card-body">
                <div class="settings-row">
                    <div>
                        <label class="settings-label">Email Address</label>
                        <p id="settings-email" class="settings-value">Loading...</p>
                    </div>
                </div>
                <div class="settings-row">
                    <div>
                        <label class="settings-label">Account Created</label>
                        <p id="settings-created" class="settings-value">Loading...</p>
                    </div>
                </div>
                <div class="settings-row">
                    <div>
                        <label class="settings-label">Current Plan</label>
                        <p class="settings-value">
                            <span class="plan-badge free">Free Plan</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="settings-card">
            <h2 class="settings-card-title">üîí Change Password</h2>
            <div class="settings-card-body">
                <form id="password-form">
                    <div class="form-group">
                        <label>New Password</label>
                        <input type="password" id="new-password" placeholder="Min 8 characters" minlength="8" required>
                    </div>
                    <div class="form-group">
                        <label>Confirm New Password</label>
                        <input type="password" id="confirm-password" placeholder="Confirm new password" required>
                    </div>
                    <div id="password-error" class="error-message"></div>
                    <div id="password-success" style="color:#10b981;background:#d1fae5;padding:0.75rem;border-radius:8px;margin-top:1rem;display:none;">
                        ‚úÖ Password updated successfully!
                    </div>
                    <button type="submit" class="btn-primary" style="margin-top:1rem;">Update Password</button>
                </form>
            </div>
        </div>
        <div class="settings-card">
            <h2 class="settings-card-title">‚≠ê Subscription</h2>
            <div class="settings-card-body">
                <div class="plan-card free-plan">
                    <div class="plan-header">
                        <div>
                            <h3>Free Plan</h3>
                            <p>Currently active</p>
                        </div>
                        <span class="plan-badge free">Current Plan</span>
                    </div>
                    <div class="plan-features">
                        <p>‚úÖ 5 vault entries</p>
                        <p>‚úÖ 1 trusted contact</p>
                        <p>‚úÖ Monthly check-ins</p>
                        <p>‚úÖ Email support</p>
                    </div>
                </div>
                <div class="plan-card premium-plan">
                    <div class="plan-header">
                        <div>
                            <h3>Premium Plan</h3>
                            <p style="font-size:2rem;font-weight:700;margin-top:0.5rem;">¬£9.99<span style="font-size:1rem;font-weight:400;opacity:0.8;">/month</span></p>
                        </div>
                        <span class="plan-badge premium">‚≠ê Popular</span>
                    </div>
                    <div class="plan-features">
                        <p>‚úÖ <strong>Unlimited</strong> vault entries</p>
                        <p>‚úÖ <strong>3</strong> trusted contacts</p>
                        <p>‚úÖ <strong>Custom</strong> check-in schedule</p>
                        <p>‚úÖ <strong>1GB</strong> file storage</p>
                        <p>‚úÖ Priority support</p>
                    </div>
                    <a href="YOUR_STRIPE_LINK_HERE" target="_blank" id="upgrade-btn" class="btn-primary" style="display:block;text-align:center;margin-top:1.5rem;text-decoration:none;">
                        Upgrade to Premium - ¬£9.99/month
                    </a>
                    <p style="text-align:center;margin-top:1rem;color:rgba(255,255,255,0.8);font-size:0.9rem;">
                        Cancel anytime ‚Ä¢ 14-day money-back guarantee
                    </p>
                </div>
            </div>
        </div>
        <div class="settings-card danger-card">
            <h2 class="settings-card-title">‚ö†Ô∏è Danger Zone</h2>
            <div class="settings-card-body">
                <div class="settings-row">
                    <div>
                        <p style="font-weight:600;color:#111827;margin-bottom:0.25rem;">Delete Account</p>
                        <p style="color:#6b7280;font-size:0.9rem;">Permanently delete your account and all data. This cannot be undone.</p>
                    </div>
                    <button id="delete-account-btn" class="btn-danger">Delete Account</button>
                </div>
            </div>
        </div>
    </div>
</div>

    <div style="max-width: 800px;">

        <!-- Account Card -->
        <div class="settings-card">
            <h2 class="settings-card-title">üë§ Account Information</h2>
            <div class="settings-card-body">
                <div class="settings-row">
                    <div>
                        <label class="settings-label">Email Address</label>
                        <p id="settings-email" class="settings-value">Loading...</p>
                    </div>
                </div>
                <div class="settings-row">
                    <div>
                        <label class="settings-label">Account Created</label>
                        <p id="settings-created" class="settings-value">Loading...</p>
                    </div>
                </div>
                <div class="settings-row">
                    <div>
                        <label class="settings-label">Current Plan</label>
                        <p class="settings-value">
                            <span id="current-plan-badge" class="plan-badge free">Free Plan</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Password Card -->
        <div class="settings-card">
            <h2 class="settings-card-title">üîí Change Password</h2>
            <div class="settings-card-body">
                <form id="password-form">
                    <div class="form-group">
                        <label>New Password</label>
                        <input type="password" id="new-password" placeholder="Enter new password (min 8 characters)" minlength="8" required>
                    </div>
                    <div class="form-group">
                        <label>Confirm New Password</label>
                        <input type="password" id="confirm-password" placeholder="Confirm new password" required>
                    </div>
                    <div id="password-error" class="error-message"></div>
                    <div id="password-success" style="color: #10b981; background: #d1fae5; padding: 0.75rem; border-radius: 8px; margin-top: 1rem; display: none;">
                        ‚úÖ Password updated successfully!
                    </div>
                    <button type="submit" class="btn-primary" style="margin-top: 1rem;">Update Password</button>
                </form>
            </div>
        </div>

        <!-- Subscription Card -->
        <div class="settings-card">
            <h2 class="settings-card-title">‚≠ê Subscription</h2>
            <div class="settings-card-body">
                <div class="plan-card free-plan">
                    <div class="plan-header">
                        <div>
                            <h3>Free Plan</h3>
                            <p>Currently active</p>
                        </div>
                        <span class="plan-badge free">Current Plan</span>
                    </div>
                    <div class="plan-features">
                        <p>‚úÖ 5 vault entries</p>
                        <p>‚úÖ 1 trusted contact</p>
                        <p>‚úÖ Monthly check-ins</p>
                        <p>‚úÖ Email support</p>
                    </div>
                </div>

                <div class="plan-card premium-plan">
                    <div class="plan-header">
                        <div>
                            <h3>Premium Plan</h3>
                            <p style="font-size: 2rem; font-weight: 700; margin-top: 0.5rem;">¬£9.99<span style="font-size: 1rem; font-weight: 400; opacity: 0.8;">/month</span></p>
                        </div>
                        <span class="plan-badge premium">‚≠ê Popular</span>
                    </div>
                    <div class="plan-features">
                        <p>‚úÖ <strong>Unlimited</strong> vault entries</p>
                        <p>‚úÖ <strong>3</strong> trusted contacts</p>
                        <p>‚úÖ <strong>Custom</strong> check-in schedule</p>
                        <p>‚úÖ <strong>1GB</strong> file storage</p>
                        <p>‚úÖ Priority support</p>
                        <p>‚úÖ Two-factor authentication</p>
                    </div>
                    <a href="YOUR_STRIPE_LINK_HERE" target="_blank" id="upgrade-btn" class="btn-primary" style="display: block; text-align: center; margin-top: 1.5rem; text-decoration: none;">
                        Upgrade to Premium - ¬£9.99/month
                    </a>
                    <p style="text-align: center; margin-top: 1rem; color: rgba(255,255,255,0.8); font-size: 0.9rem;">
                        Cancel anytime ‚Ä¢ 14-day money-back guarantee
                    </p>
                </div>
            </div>
        </div>

        <!-- Danger Zone Card -->
        <div class="settings-card danger-card">
            <h2 class="settings-card-title">‚ö†Ô∏è Danger Zone</h2>
            <div class="settings-card-body">
                <div class="settings-row">
                    <div>
                        <p style="font-weight: 600; color: #111827; margin-bottom: 0.25rem;">Delete Account</p>
                        <p style="color: #6b7280; font-size: 0.9rem;">Permanently delete your account and all data. This cannot be undone.</p>
                    </div>
                    <button id="delete-account-btn" class="btn-danger">Delete Account</button>
                </div>
            </div>
        </div>

    </div>
</div>
    <!-- Check-in Status Card -->
    <div class="checkin-status-card">
        <div class="status-indicator" id="status-indicator">
            <div class="status-icon" id="status-icon">‚úÖ</div>
            <h2 id="status-title">You're all set!</h2>
            <p id="status-message">Your next check-in is due in <strong id="days-remaining">30 days</strong></p>
        </div>

        <div class="checkin-details">
            <div class="detail-item">
                <span class="detail-label">Last Check-In:</span>
                <span class="detail-value" id="last-checkin-date">Never</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">Next Check-In Due:</span>
                <span class="detail-value" id="next-checkin-date">Not set</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">Check-In Frequency:</span>
                <span class="detail-value" id="current-frequency">30 days</span>
            </div>
        </div>

        <button id="checkin-now-btn" class="btn-primary btn-large" style="margin-top: 2rem; width: 100%; max-width: 400px;">
            ‚úì I'm OK - Check In Now
        </button>
    </div>

    <!-- Check-In Settings Card -->
    <div class="checkin-settings-card">
        <h3>Check-In Settings</h3>
        <p style="color: #6b7280; margin-bottom: 1.5rem;">How often should we check that you're okay?</p>

        <div class="frequency-options">
            <label class="frequency-option">
                <input type="radio" name="frequency" value="7">
                <span class="frequency-label">
                    <strong>Every 7 days</strong>
                    <small>Weekly check-ins</small>
                </span>
            </label>

            <label class="frequency-option">
                <input type="radio" name="frequency" value="14">
                <span class="frequency-label">
                    <strong>Every 14 days</strong>
                    <small>Bi-weekly check-ins</small>
                </span>
            </label>

            <label class="frequency-option">
                <input type="radio" name="frequency" value="30" checked>
                <span class="frequency-label">
                    <strong>Every 30 days</strong>
                    <small>Monthly check-ins (recommended)</small>
                </span>
            </label>

            <label class="frequency-option premium-only">
                <input type="radio" name="frequency" value="60">
                <span class="frequency-label">
                    <strong>Every 60 days</strong>
                    <small>Premium only</small>
                </span>
            </label>

            <label class="frequency-option premium-only">
                <input type="radio" name="frequency" value="90">
                <span class="frequency-label">
                    <strong>Every 90 days</strong>
                    <small>Premium only</small>
                </span>
            </label>
        </div>

        <button id="save-frequency-btn" class="btn-primary" style="margin-top: 1.5rem;">Save Frequency</button>
    </div>

    <!-- Check-In History -->
    <div class="checkin-history-card">
        <h3>Check-In History</h3>
        <div id="checkin-history-list">
            <p style="color: #6b7280; text-align: center; padding: 2rem;">No check-ins yet</p>
        </div>
    </div>
</div>
            </div>
        </main>
    </div>

    <!-- Add/Edit Entry Modal -->
    <div id="entry-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Add Entry</h2>
                <button id="close-modal" class="close-btn">&times;</button>
            </div>
            <form id="entry-form">
                <div class="form-group">
                    <label>Title *</label>
                    <input type="text" id="entry-title" placeholder="e.g., Gmail Account" required>
                </div>
                
                <div class="form-group">
                    <label>Category</label>
                    <select id="entry-category">
                        <option value="Financial">Financial</option>
                        <option value="Legal">Legal</option>
                        <option value="Medical">Medical</option>
                        <option value="Personal">Personal</option>
                        <option value="Other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Type</label>
                    <select id="entry-type">
                        <option value="Password">Password</option>
                        <option value="Bank Account">Bank Account</option>
                        <option value="Insurance">Insurance</option>
                        <option value="Document">Document</option>
                        <option value="Other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Username/Account</label>
                    <input type="text" id="entry-username" placeholder="Optional">
                </div>

                <div class="form-group">
                    <label>Password/Account Number</label>
                    <input type="text" id="entry-password" placeholder="Optional">
                </div>

                <div class="form-group">
                    <label>Notes</label>
                    <textarea id="entry-notes" rows="4" placeholder="Additional information..."></textarea>
                </div>

                <div class="modal-actions">
                    <button type="button" id="cancel-entry" class="btn-secondary">Cancel</button>
                    <button type="submit" class="btn-primary">Save Entry</button>
                </div>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
